function cov_1kfq2xbq2s(){var path="/home/aemass/Desktop/khreadcross/controllers/repository/user_repository.js";var hash="404a31cb292eff557f64402703cd95c00d0b147e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/aemass/Desktop/khreadcross/controllers/repository/user_repository.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:28}},"1":{start:{line:2,column:14},end:{line:2,column:30}},"2":{start:{line:4,column:17},end:{line:4,column:53}},"3":{start:{line:5,column:18},end:{line:5,column:47}},"4":{start:{line:7,column:18},end:{line:33,column:1}},"5":{start:{line:8,column:20},end:{line:8,column:22}},"6":{start:{line:10,column:4},end:{line:12,column:5}},"7":{start:{line:11,column:8},end:{line:11,column:36}},"8":{start:{line:13,column:4},end:{line:15,column:5}},"9":{start:{line:14,column:8},end:{line:14,column:32}},"10":{start:{line:16,column:4},end:{line:18,column:5}},"11":{start:{line:17,column:8},end:{line:17,column:30}},"12":{start:{line:19,column:4},end:{line:21,column:5}},"13":{start:{line:20,column:8},end:{line:20,column:34}},"14":{start:{line:23,column:4},end:{line:32,column:5}},"15":{start:{line:24,column:24},end:{line:27,column:10}},"16":{start:{line:28,column:8},end:{line:28,column:25}},"17":{start:{line:31,column:8},end:{line:31,column:31}},"18":{start:{line:35,column:17},end:{line:43,column:1}},"19":{start:{line:36,column:27},end:{line:36,column:47}},"20":{start:{line:37,column:4},end:{line:42,column:5}},"21":{start:{line:38,column:8},end:{line:38,column:191}},"22":{start:{line:41,column:8},end:{line:41,column:31}},"23":{start:{line:45,column:20},end:{line:84,column:1}},"24":{start:{line:46,column:4},end:{line:48,column:5}},"25":{start:{line:47,column:8},end:{line:47,column:62}},"26":{start:{line:49,column:22},end:{line:53,column:6}},"27":{start:{line:54,column:23},end:{line:54,column:25}},"28":{start:{line:55,column:4},end:{line:55,column:69}},"29":{start:{line:57,column:4},end:{line:60,column:5}},"30":{start:{line:58,column:31},end:{line:58,column:51}},"31":{start:{line:59,column:8},end:{line:59,column:47}},"32":{start:{line:62,column:4},end:{line:64,column:5}},"33":{start:{line:63,column:8},end:{line:63,column:38}},"34":{start:{line:66,column:4},end:{line:68,column:5}},"35":{start:{line:67,column:8},end:{line:67,column:37}},"36":{start:{line:70,column:4},end:{line:72,column:5}},"37":{start:{line:71,column:8},end:{line:71,column:54}},"38":{start:{line:74,column:4},end:{line:76,column:5}},"39":{start:{line:75,column:8},end:{line:75,column:42}},"40":{start:{line:78,column:4},end:{line:83,column:5}},"41":{start:{line:79,column:8},end:{line:79,column:52}},"42":{start:{line:82,column:8},end:{line:82,column:31}},"43":{start:{line:86,column:20},end:{line:123,column:1}},"44":{start:{line:87,column:4},end:{line:122,column:5}},"45":{start:{line:88,column:8},end:{line:118,column:9}},"46":{start:{line:89,column:30},end:{line:93,column:14}},"47":{start:{line:94,column:12},end:{line:100,column:13}},"48":{start:{line:95,column:16},end:{line:95,column:43}},"49":{start:{line:96,column:16},end:{line:96,column:49}},"50":{start:{line:99,column:16},end:{line:99,column:60}},"51":{start:{line:102,column:13},end:{line:118,column:9}},"52":{start:{line:103,column:30},end:{line:107,column:14}},"53":{start:{line:108,column:12},end:{line:114,column:13}},"54":{start:{line:109,column:16},end:{line:109,column:43}},"55":{start:{line:110,column:16},end:{line:110,column:49}},"56":{start:{line:113,column:16},end:{line:113,column:60}},"57":{start:{line:117,column:12},end:{line:117,column:84}},"58":{start:{line:121,column:8},end:{line:121,column:31}},"59":{start:{line:125,column:0},end:{line:125,column:28}},"60":{start:{line:126,column:0},end:{line:126,column:30}},"61":{start:{line:127,column:0},end:{line:127,column:34}},"62":{start:{line:128,column:0},end:{line:128,column:34}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:66},end:{line:33,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:35,column:17},end:{line:35,column:18}},loc:{start:{line:35,column:91},end:{line:43,column:1}},line:35},"2":{name:"(anonymous_2)",decl:{start:{line:45,column:20},end:{line:45,column:21}},loc:{start:{line:45,column:101},end:{line:84,column:1}},line:45},"3":{name:"(anonymous_3)",decl:{start:{line:86,column:20},end:{line:86,column:21}},loc:{start:{line:86,column:52},end:{line:123,column:1}},line:86}},branchMap:{"0":{loc:{start:{line:7,column:24},end:{line:7,column:61}},type:"default-arg",locations:[{start:{line:7,column:59},end:{line:7,column:61}}],line:7},"1":{loc:{start:{line:10,column:4},end:{line:12,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:12,column:5}},{start:{line:10,column:4},end:{line:12,column:5}}],line:10},"2":{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:13,column:4},end:{line:15,column:5}}],line:13},"3":{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:16,column:4},end:{line:18,column:5}}],line:16},"4":{loc:{start:{line:19,column:4},end:{line:21,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:21,column:5}},{start:{line:19,column:4},end:{line:21,column:5}}],line:19},"5":{loc:{start:{line:35,column:53},end:{line:35,column:62}},type:"default-arg",locations:[{start:{line:35,column:60},end:{line:35,column:62}}],line:35},"6":{loc:{start:{line:35,column:64},end:{line:35,column:84}},type:"default-arg",locations:[{start:{line:35,column:82},end:{line:35,column:84}}],line:35},"7":{loc:{start:{line:45,column:26},end:{line:45,column:96}},type:"default-arg",locations:[{start:{line:45,column:94},end:{line:45,column:96}}],line:45},"8":{loc:{start:{line:46,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:48,column:5}},{start:{line:46,column:4},end:{line:48,column:5}}],line:46},"9":{loc:{start:{line:57,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:60,column:5}},{start:{line:57,column:4},end:{line:60,column:5}}],line:57},"10":{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:62,column:4},end:{line:64,column:5}}],line:62},"11":{loc:{start:{line:66,column:4},end:{line:68,column:5}},type:"if",locations:[{start:{line:66,column:4},end:{line:68,column:5}},{start:{line:66,column:4},end:{line:68,column:5}}],line:66},"12":{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:70,column:4},end:{line:72,column:5}}],line:70},"13":{loc:{start:{line:74,column:4},end:{line:76,column:5}},type:"if",locations:[{start:{line:74,column:4},end:{line:76,column:5}},{start:{line:74,column:4},end:{line:76,column:5}}],line:74},"14":{loc:{start:{line:86,column:26},end:{line:86,column:47}},type:"default-arg",locations:[{start:{line:86,column:45},end:{line:86,column:47}}],line:86},"15":{loc:{start:{line:88,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:88,column:8},end:{line:118,column:9}},{start:{line:88,column:8},end:{line:118,column:9}}],line:88},"16":{loc:{start:{line:94,column:12},end:{line:100,column:13}},type:"if",locations:[{start:{line:94,column:12},end:{line:100,column:13}},{start:{line:94,column:12},end:{line:100,column:13}}],line:94},"17":{loc:{start:{line:102,column:13},end:{line:118,column:9}},type:"if",locations:[{start:{line:102,column:13},end:{line:118,column:9}},{start:{line:102,column:13},end:{line:118,column:9}}],line:102},"18":{loc:{start:{line:108,column:12},end:{line:114,column:13}},type:"if",locations:[{start:{line:108,column:12},end:{line:114,column:13}},{start:{line:108,column:12},end:{line:114,column:13}}],line:108}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0],"6":[0],"7":[0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"404a31cb292eff557f64402703cd95c00d0b147e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1kfq2xbq2s=function(){return actualCoverage;};}return actualCoverage;}cov_1kfq2xbq2s();const uuid=(cov_1kfq2xbq2s().s[0]++,require('uuid'));const dayjs=(cov_1kfq2xbq2s().s[1]++,require('dayjs'));const{hash}=(cov_1kfq2xbq2s().s[2]++,require('../../utils/passwordUtils'));const{users}=(cov_1kfq2xbq2s().s[3]++,require('../../models/index'));cov_1kfq2xbq2s().s[4]++;const get_users=async({user_id,email,name,status}=(cov_1kfq2xbq2s().b[0][0]++,{}))=>{cov_1kfq2xbq2s().f[0]++;let condition=(cov_1kfq2xbq2s().s[5]++,{});cov_1kfq2xbq2s().s[6]++;if(user_id){cov_1kfq2xbq2s().b[1][0]++;cov_1kfq2xbq2s().s[7]++;condition.user_id=user_id;}else{cov_1kfq2xbq2s().b[1][1]++;}cov_1kfq2xbq2s().s[8]++;if(email){cov_1kfq2xbq2s().b[2][0]++;cov_1kfq2xbq2s().s[9]++;condition.email=email;}else{cov_1kfq2xbq2s().b[2][1]++;}cov_1kfq2xbq2s().s[10]++;if(name){cov_1kfq2xbq2s().b[3][0]++;cov_1kfq2xbq2s().s[11]++;condition.name=name;}else{cov_1kfq2xbq2s().b[3][1]++;}cov_1kfq2xbq2s().s[12]++;if(status){cov_1kfq2xbq2s().b[4][0]++;cov_1kfq2xbq2s().s[13]++;condition.status=status;}else{cov_1kfq2xbq2s().b[4][1]++;}cov_1kfq2xbq2s().s[14]++;try{let user_list=(cov_1kfq2xbq2s().s[15]++,await users.findAll({where:condition,raw:true}));cov_1kfq2xbq2s().s[16]++;return user_list;}catch(error){cov_1kfq2xbq2s().s[17]++;throw new Error(error);}};cov_1kfq2xbq2s().s[18]++;const add_user=async({email,user_name,password,avatar=(cov_1kfq2xbq2s().b[5][0]++,''),self_introduction=(cov_1kfq2xbq2s().b[6][0]++,'')})=>{cov_1kfq2xbq2s().f[1]++;const hashedPassword=(cov_1kfq2xbq2s().s[19]++,await hash(password));cov_1kfq2xbq2s().s[20]++;try{cov_1kfq2xbq2s().s[21]++;return await users.create({user_id:uuid.v4(),email:email,password:hashedPassword,name:user_name,avatar:avatar,self_introduction:self_introduction,status:1},{raw:true});}catch(error){cov_1kfq2xbq2s().s[22]++;throw new Error(error);}};cov_1kfq2xbq2s().s[23]++;const update_user=async({email,password,user_name,avatar,introduction,user_status}=(cov_1kfq2xbq2s().b[7][0]++,{}))=>{cov_1kfq2xbq2s().f[2]++;cov_1kfq2xbq2s().s[24]++;if(!email){cov_1kfq2xbq2s().b[8][0]++;cov_1kfq2xbq2s().s[25]++;return{'message':'Email is a required parameter!!'};}else{cov_1kfq2xbq2s().b[8][1]++;}const user_info=(cov_1kfq2xbq2s().s[26]++,await users.findOne({where:{email:email}}));let modification=(cov_1kfq2xbq2s().s[27]++,{});cov_1kfq2xbq2s().s[28]++;modification.update_time=dayjs().format('YYYY-MM-DD HH:mm:ss');cov_1kfq2xbq2s().s[29]++;if(password){cov_1kfq2xbq2s().b[9][0]++;const hashedPassword=(cov_1kfq2xbq2s().s[30]++,await hash(password));cov_1kfq2xbq2s().s[31]++;modification.password=hashedPassword;}else{cov_1kfq2xbq2s().b[9][1]++;}cov_1kfq2xbq2s().s[32]++;if(user_name){cov_1kfq2xbq2s().b[10][0]++;cov_1kfq2xbq2s().s[33]++;modification.name=user_name;}else{cov_1kfq2xbq2s().b[10][1]++;}cov_1kfq2xbq2s().s[34]++;if(avatar){cov_1kfq2xbq2s().b[11][0]++;cov_1kfq2xbq2s().s[35]++;modification.avatar=avatar;}else{cov_1kfq2xbq2s().b[11][1]++;}cov_1kfq2xbq2s().s[36]++;if(introduction){cov_1kfq2xbq2s().b[12][0]++;cov_1kfq2xbq2s().s[37]++;modification.self_introduction=introduction;}else{cov_1kfq2xbq2s().b[12][1]++;}cov_1kfq2xbq2s().s[38]++;if(user_status){cov_1kfq2xbq2s().b[13][0]++;cov_1kfq2xbq2s().s[39]++;modification.status=user_status;}else{cov_1kfq2xbq2s().b[13][1]++;}cov_1kfq2xbq2s().s[40]++;try{cov_1kfq2xbq2s().s[41]++;return await user_info.update(modification);}catch(error){cov_1kfq2xbq2s().s[42]++;throw new Error(error);}};cov_1kfq2xbq2s().s[43]++;const delete_user=async({user_id,email}=(cov_1kfq2xbq2s().b[14][0]++,{}))=>{cov_1kfq2xbq2s().f[3]++;cov_1kfq2xbq2s().s[44]++;try{cov_1kfq2xbq2s().s[45]++;if(user_id){cov_1kfq2xbq2s().b[15][0]++;const user_info=(cov_1kfq2xbq2s().s[46]++,await users.findOne({where:{user_id:user_id}}));cov_1kfq2xbq2s().s[47]++;if(user_info){cov_1kfq2xbq2s().b[16][0]++;cov_1kfq2xbq2s().s[48]++;console.log('delete user');cov_1kfq2xbq2s().s[49]++;return await user_info.destroy();}else{cov_1kfq2xbq2s().b[16][1]++;cov_1kfq2xbq2s().s[50]++;return{'message':'This user not found!!'};}}else{cov_1kfq2xbq2s().b[15][1]++;cov_1kfq2xbq2s().s[51]++;if(email){cov_1kfq2xbq2s().b[17][0]++;const user_info=(cov_1kfq2xbq2s().s[52]++,await users.findOne({where:{email:email}}));cov_1kfq2xbq2s().s[53]++;if(user_info){cov_1kfq2xbq2s().b[18][0]++;cov_1kfq2xbq2s().s[54]++;console.log('delete user');cov_1kfq2xbq2s().s[55]++;return await user_info.destroy();}else{cov_1kfq2xbq2s().b[18][1]++;cov_1kfq2xbq2s().s[56]++;return{'message':'This user not found!!'};}}else{cov_1kfq2xbq2s().b[17][1]++;cov_1kfq2xbq2s().s[57]++;return{'message':'Either user_id or email is a required parameter!!'};}}}catch(error){cov_1kfq2xbq2s().s[58]++;throw new Error(error);}};cov_1kfq2xbq2s().s[59]++;exports.add_user=add_user;cov_1kfq2xbq2s().s[60]++;exports.get_users=get_users;cov_1kfq2xbq2s().s[61]++;exports.update_user=update_user;cov_1kfq2xbq2s().s[62]++;exports.delete_user=delete_user;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWtmcTJ4YnEycyIsImFjdHVhbENvdmVyYWdlIiwidXVpZCIsInMiLCJyZXF1aXJlIiwiZGF5anMiLCJoYXNoIiwidXNlcnMiLCJnZXRfdXNlcnMiLCJ1c2VyX2lkIiwiZW1haWwiLCJuYW1lIiwic3RhdHVzIiwiYiIsImYiLCJjb25kaXRpb24iLCJ1c2VyX2xpc3QiLCJmaW5kQWxsIiwid2hlcmUiLCJyYXciLCJlcnJvciIsIkVycm9yIiwiYWRkX3VzZXIiLCJ1c2VyX25hbWUiLCJwYXNzd29yZCIsImF2YXRhciIsInNlbGZfaW50cm9kdWN0aW9uIiwiaGFzaGVkUGFzc3dvcmQiLCJjcmVhdGUiLCJ2NCIsInVwZGF0ZV91c2VyIiwiaW50cm9kdWN0aW9uIiwidXNlcl9zdGF0dXMiLCJ1c2VyX2luZm8iLCJmaW5kT25lIiwibW9kaWZpY2F0aW9uIiwidXBkYXRlX3RpbWUiLCJmb3JtYXQiLCJ1cGRhdGUiLCJkZWxldGVfdXNlciIsImNvbnNvbGUiLCJsb2ciLCJkZXN0cm95IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVzZXJfcmVwb3NpdG9yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB1dWlkID0gcmVxdWlyZSgndXVpZCcpO1xuY29uc3QgZGF5anMgPSByZXF1aXJlKCdkYXlqcycpO1xuXG5jb25zdCB7IGhhc2ggfSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3Bhc3N3b3JkVXRpbHMnKTtcbmNvbnN0IHsgdXNlcnMgfSA9IHJlcXVpcmUoJy4uLy4uL21vZGVscy9pbmRleCcpO1xuXG5jb25zdCBnZXRfdXNlcnMgPSBhc3luYyh7IHVzZXJfaWQsIGVtYWlsLCBuYW1lLCBzdGF0dXMgfSA9IHt9KSA9PiB7XG4gICAgbGV0IGNvbmRpdGlvbiA9IHt9O1xuXG4gICAgaWYgKHVzZXJfaWQpIHtcbiAgICAgICAgY29uZGl0aW9uLnVzZXJfaWQgPSB1c2VyX2lkO1xuICAgIH1cbiAgICBpZiAoZW1haWwpIHtcbiAgICAgICAgY29uZGl0aW9uLmVtYWlsID0gZW1haWw7XG4gICAgfVxuICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGNvbmRpdGlvbi5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgICBjb25kaXRpb24uc3RhdHVzID0gc3RhdHVzO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGxldCB1c2VyX2xpc3QgPSBhd2FpdCB1c2Vycy5maW5kQWxsKHtcbiAgICAgICAgICAgIHdoZXJlOiBjb25kaXRpb24sXG4gICAgICAgICAgICByYXc6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB1c2VyX2xpc3Q7XG4gICAgfVxuICAgIGNhdGNoKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgfVxufVxuXG5jb25zdCBhZGRfdXNlciA9IGFzeW5jKHsgZW1haWwsIHVzZXJfbmFtZSwgcGFzc3dvcmQsIGF2YXRhcj0nJywgc2VsZl9pbnRyb2R1Y3Rpb249JycgfSkgPT4ge1xuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgaGFzaChwYXNzd29yZCk7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHVzZXJzLmNyZWF0ZSh7dXNlcl9pZDogdXVpZC52NCgpLCBlbWFpbDogZW1haWwsIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCwgbmFtZTogdXNlcl9uYW1lLCBhdmF0YXI6IGF2YXRhciwgc2VsZl9pbnRyb2R1Y3Rpb246IHNlbGZfaW50cm9kdWN0aW9uLCBzdGF0dXM6IDF9LCB7cmF3OiB0cnVlfSk7XG4gICAgfVxuICAgIGNhdGNoKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgfVxufVxuXG5jb25zdCB1cGRhdGVfdXNlciA9IGFzeW5jKHsgZW1haWwsIHBhc3N3b3JkLCB1c2VyX25hbWUsIGF2YXRhciwgaW50cm9kdWN0aW9uLCB1c2VyX3N0YXR1cyB9ID0ge30pID0+IHtcbiAgICBpZiAoIWVtYWlsKSB7XG4gICAgICAgIHJldHVybiB7J21lc3NhZ2UnOiAnRW1haWwgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXIhISd9O1xuICAgIH1cbiAgICBjb25zdCB1c2VyX2luZm8gPSBhd2FpdCB1c2Vycy5maW5kT25lKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxuICAgICAgICB9XG4gICAgfSlcbiAgICBsZXQgbW9kaWZpY2F0aW9uID0ge307XG4gICAgbW9kaWZpY2F0aW9uLnVwZGF0ZV90aW1lID0gZGF5anMoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKTtcblxuICAgIGlmIChwYXNzd29yZCkge1xuICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGhhc2gocGFzc3dvcmQpO1xuICAgICAgICBtb2RpZmljYXRpb24ucGFzc3dvcmQgPSBoYXNoZWRQYXNzd29yZDtcbiAgICB9XG5cbiAgICBpZiAodXNlcl9uYW1lKSB7XG4gICAgICAgIG1vZGlmaWNhdGlvbi5uYW1lID0gdXNlcl9uYW1lO1xuICAgIH1cblxuICAgIGlmIChhdmF0YXIpIHtcbiAgICAgICAgbW9kaWZpY2F0aW9uLmF2YXRhciA9IGF2YXRhcjtcbiAgICB9XG5cbiAgICBpZiAoaW50cm9kdWN0aW9uKSB7XG4gICAgICAgIG1vZGlmaWNhdGlvbi5zZWxmX2ludHJvZHVjdGlvbiA9IGludHJvZHVjdGlvbjtcbiAgICB9XG5cbiAgICBpZiAodXNlcl9zdGF0dXMpIHtcbiAgICAgICAgbW9kaWZpY2F0aW9uLnN0YXR1cyA9IHVzZXJfc3RhdHVzO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB1c2VyX2luZm8udXBkYXRlKG1vZGlmaWNhdGlvbik7XG4gICAgfVxuICAgIGNhdGNoKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgfSBcbn1cblxuY29uc3QgZGVsZXRlX3VzZXIgPSBhc3luYyh7dXNlcl9pZCwgZW1haWx9ID0ge30pID0+IHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodXNlcl9pZCkge1xuICAgICAgICAgICAgY29uc3QgdXNlcl9pbmZvID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcl9pZDogdXNlcl9pZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAodXNlcl9pbmZvKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZSB1c2VyJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHVzZXJfaW5mby5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geydtZXNzYWdlJzogJ1RoaXMgdXNlciBub3QgZm91bmQhISd9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVtYWlsKSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyX2luZm8gPSBhd2FpdCB1c2Vycy5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKHVzZXJfaW5mbykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGUgdXNlcicpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB1c2VyX2luZm8uZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsnbWVzc2FnZSc6ICdUaGlzIHVzZXIgbm90IGZvdW5kISEnfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7J21lc3NhZ2UnOiAnRWl0aGVyIHVzZXJfaWQgb3IgZW1haWwgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXIhISd9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgfVxufVxuXG5leHBvcnRzLmFkZF91c2VyID0gYWRkX3VzZXI7XG5leHBvcnRzLmdldF91c2VycyA9IGdldF91c2VycztcbmV4cG9ydHMudXBkYXRlX3VzZXIgPSB1cGRhdGVfdXNlcjtcbmV4cG9ydHMuZGVsZXRlX3VzZXIgPSBkZWxldGVfdXNlcjsiXSwibWFwcGluZ3MiOiJ5cVJBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosS0FBTSxDQUFBRSxJQUFJLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQzVCLEtBQU0sQ0FBQUMsS0FBSyxFQUFBTCxjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUU5QixLQUFNLENBQUVFLElBQUssQ0FBQyxFQUFBTixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLDJCQUEyQixDQUFDLEVBQ3JELEtBQU0sQ0FBRUcsS0FBTSxDQUFDLEVBQUFQLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsRUFBQ0osY0FBQSxHQUFBRyxDQUFBLE1BRWhELEtBQU0sQ0FBQUssU0FBUyxDQUFHLEtBQUFBLENBQU0sQ0FBRUMsT0FBTyxDQUFFQyxLQUFLLENBQUVDLElBQUksQ0FBRUMsTUFBTyxDQUFDLEVBQUFaLGNBQUEsR0FBQWEsQ0FBQSxTQUFHLENBQUMsQ0FBQyxJQUFLLENBQUFiLGNBQUEsR0FBQWMsQ0FBQSxNQUM5RCxHQUFJLENBQUFDLFNBQVMsRUFBQWYsY0FBQSxHQUFBRyxDQUFBLE1BQUcsQ0FBQyxDQUFDLEVB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